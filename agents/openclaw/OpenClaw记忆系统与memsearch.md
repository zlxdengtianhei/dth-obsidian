---
title: OpenClawè®°å¿†ç³»ç»Ÿä¸memsearch
date: 2026-02-13
source: https://www.53ai.com/news/RAG/2026021148561.html
tags:
  - OpenClaw
  - Agent
  - Memory
  - RAG
  - memsearch
---

# å¼€æºï¼šæˆ‘ä»¬å¤åˆ»äº†OpenClawçš„memç³»ç»Ÿï¼Œä¸ºæ‰€æœ‰Agentæ‰“é€ é€æ˜ã€å¯æ§çš„è®°å¿†

> ä½œè€…ï¼šå¼ æ™¨ (Zilliz Algorithm Engineer)
> æ¥æºï¼š53AI

## æ¨èè¯­

æ­ç§˜OpenClawè®°å¿†ç³»ç»Ÿçš„ç²¾é«“ï¼Œæˆ‘ä»¬å¼€æºäº†memsearchï¼Œè®©æ‰€æœ‰Agentéƒ½èƒ½æ‹¥æœ‰é€æ˜å¯æ§çš„è®°å¿†èƒ½åŠ›ã€‚

æ ¸å¿ƒå†…å®¹ï¼š
1. OpenClawè®°å¿†ç³»ç»Ÿçš„ç‹¬ç‰¹è®¾è®¡ï¼šé€æ˜ã€å¯ç¼–è¾‘ã€å¯ç§»æ¤
2. memsearchå¦‚ä½•å°†è¿™å¥—è®°å¿†ç³»ç»ŸæŠ½ç¦»ä¸ºè½»é‡çº§æ’ä»¶
3. å¼€å‘è€…å¯å¿«é€Ÿé›†æˆï¼Œä¸ºAgentæ·»åŠ æŒä¹…è®°å¿†åŠŸèƒ½

---

## 01 å…ˆææ‡‚ï¼šOpenClawçš„è®°å¿†ç³»ç»Ÿï¼Œåˆ°åº•ç‰›åœ¨å“ªï¼Ÿ

è¦ç†è§£OpenClawçš„è®°å¿†ï¼Œé¦–å…ˆå¾—åˆ†æ¸…ä¸¤ä¸ªå®¹æ˜“æ··æ·†çš„æ¦‚å¿µï¼š**ä¸Šä¸‹æ–‡**å’Œ**è®°å¿†**ã€‚

### ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰
ä¸Šä¸‹æ–‡ä¸»è¦åŒ…æ‹¬å››éƒ¨åˆ†ï¼š
- é™æ€+æ¡ä»¶åŒ–çš„ç³»ç»Ÿæç¤ºè¯
- AGENTS.mdå’ŒSOUL.mdè¿™ç±»å¼•å¯¼æ–‡ä»¶çš„é¡¹ç›®ä¸Šä¸‹æ–‡
- è¿‡å¾€çš„å¯¹è¯å†å²ï¼ˆåŒ…æ‹¬æ¶ˆæ¯ã€å·¥å…·è°ƒç”¨è®°å½•å’Œå‹ç¼©æ‘˜è¦ï¼‰
- ä½ å½“ä¸‹å‘çš„æ¶ˆæ¯

å…¶å®å°±æ˜¯æ¯æ¬¡ä½ ç»™OpenClawå‘è¯·æ±‚æ—¶ï¼Œagentèƒ½æ¥æ”¶åˆ°çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ•´ä½“å†…å®¹ä¼šæ›´ç²¾ç®€ã€‚

### è®°å¿†ï¼ˆMemoryï¼‰
è®°å¿†æ˜¯å­˜åœ¨ä½ æœ¬åœ°ç£ç›˜é‡Œçš„æŒä¹…åŒ–æ•°æ®ï¼Œæ˜¯å†å²ä¼šè¯ã€å†å²æ–‡ä»¶ã€ç”¨æˆ·åå¥½ç­‰çš„æ€»å’Œï¼Œé‡‡ç”¨çš„æ˜¯**å…¨é‡å­˜å‚¨**ã€‚

### æœ€æ ¸å¿ƒçš„è®¾è®¡
OpenClawçš„æ‰€æœ‰è®°å¿†ï¼Œéƒ½æ˜¯ä»¥ **Markdown æ ¼å¼**å­˜å‚¨åœ¨æœ¬åœ°æ–‡ä»¶ä¸­ï¼š
- é™¤äº†æ™ºèƒ½ä½“è‡ªåŠ¨å†™å…¥ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥æ‰‹åŠ¨ç¼–è¾‘è¿™äº› md æ–‡ä»¶
- å‘é‡æ•°æ®åº“åªæ˜¯æ´¾ç”Ÿç´¢å¼•
- åªè¦mdæ–‡ä»¶ä¿®æ”¹å¹¶ä¿å­˜ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¯¹æ–°å†…å®¹é‡æ–°å»ºç«‹ç´¢å¼•

### ç›¸æ¯”ä¸»æµæ–¹æ¡ˆçš„ä¼˜åŠ¿

ç›¸æ¯”Mem0ã€Zepç­‰ä¸»æµæŠŠå‘é‡æ•°æ®åº“å½“æˆå”¯ä¸€è®°å¿†æ¥æºçš„å½¢å¼ï¼ŒOpenClawçš„è®¾è®¡æœ‰ä¸‰ä¸ªä¼˜ç‚¹ï¼š

| ç‰¹ç‚¹ | è¯´æ˜ |
|------|------|
| **é€æ˜** | MDæ ¼å¼ï¼Œæ‰“å¼€å°±çŸ¥é“AIè®°äº†ä»€ä¹ˆ |
| **å¯ç¼–è¾‘** | æ”¹å®Œç›´æ¥ç”Ÿæ•ˆ |
| **å¯ç§»æ¤** | å¤åˆ¶æ–‡ä»¶å°±èƒ½è¿ç§» |

---

## 02 memsearchæ ¸å¿ƒæ€è·¯ï¼šå¯ç¼–è¾‘ã€æ’ä»¶åŒ–ã€é«˜åº¦é€æ˜

memsearchå®Œå…¨ç»§æ‰¿äº†OpenClawçš„**Markdownä¼˜å…ˆ**çš„ç†å¿µï¼Œä½ çš„æ‰€æœ‰AIè®°å¿†ï¼Œéƒ½ä»¥æ˜æ–‡å½¢å¼å­˜åœ¨æœ¬åœ°æ–‡ä»¶å¤¹é‡Œï¼š

```
~/your-project/
â””â”€â”€ memory/
    â”œâ”€â”€ MEMORY.md              # æ‰‹å†™çš„é•¿æœŸè®°å¿†
    â”œâ”€â”€ 2026-02-09.md          # ä»Šå¤©çš„å·¥ä½œæ—¥å¿—
    â”œâ”€â”€ 2026-02-08.md
    â””â”€â”€ 2026-02-07.md
```

å»ºç«‹åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒMilvusåªæ˜¯ä¸€ä¸ªè¾…åŠ©å·¥å…·ï¼Œç”¨æ¥ç»™Markdownå†…å®¹å»ºç«‹ç´¢å¼•ï¼ŒåŠ å¿«æœç´¢é€Ÿåº¦ã€‚

> **æ ¸å¿ƒåŸåˆ™**ï¼šå³ä½¿ä½ åˆ æ‰å‘é‡æ•°æ®åº“æ–‡ä»¶ï¼Œåªè¦Markdownè¿˜åœ¨ï¼Œé‡æ–°ç´¢å¼•5åˆ†é’Ÿå°±èƒ½æ¢å¤æ‰€æœ‰è®°å¿†ã€‚

### å¥½å¤„1ï¼šé€æ˜å¯è¯»ï¼Œè°ƒè¯•å®¹æ˜“

**ä¼ ç»Ÿæ–¹æ¡ˆ**ï¼šå³ä½¿AIå›ç­”é”™äº†ï¼Œä½ ä¹Ÿä¸çŸ¥é“å®ƒè®°ä½äº†ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆé”™ã€‚ç„¶åå¾—å†™ä»£ç è°ƒAPIæŸ¥æ•°æ®åº“ï¼Œçœ‹åˆ°çš„å…¨æ˜¯å‘é‡å’ŒJSONï¼Œæ ¹æœ¬çœ‹ä¸æ‡‚è¯­ä¹‰ã€‚

**memsearchæ–¹æ¡ˆ**ï¼šç›´æ¥æ‰“å¼€memoryæ–‡ä»¶å¤¹ä¸‹çš„å¯¹åº”Markdownæ–‡ä»¶ï¼Œå°±èƒ½çœ‹åˆ°AIçš„å®Œæ•´è®°å¿†ï¼š

```markdown
## Morning
- Fixed N+1 query issue â€” switched to selectinload()
- Query count dropped from 152 to 3
```

å¦‚æœAIè¯´é”™è¯ï¼Œå¯èƒ½æ˜¯è¿™æ®µè®°å¿†è¿‡æ—¶äº†ã€‚vimæ”¹ä¸€ä¸‹ï¼Œä¿å­˜ï¼Œç³»ç»Ÿè‡ªåŠ¨é‡æ–°ç´¢å¼•ã€‚5ç§’è§£å†³é—®é¢˜ã€‚

### å¥½å¤„2ï¼šç‰ˆæœ¬æ§åˆ¶ï¼Œå›¢é˜Ÿåä½œ

**ä¼ ç»Ÿæ–¹æ¡ˆ**ï¼šè®°å¿†å­˜åœ¨æ•°æ®åº“é‡Œï¼Œè°æ”¹äº†ä»€ä¹ˆã€ä»€ä¹ˆæ—¶å€™æ”¹çš„ï¼Œåªèƒ½æŸ¥å®¡è®¡æ—¥å¿—ã€‚

**memsearchæ–¹æ¡ˆ**ï¼šç›´æ¥ç”¨Gitç®¡ç†Markdownæ–‡ä»¶ï¼š

```bash
git log memory/MEMORY.md
git diff HEAD~1 memory/2026-02-09.md
```

å›¢é˜ŸPRè¯„å®¡æ—¶ï¼Œç”šè‡³èƒ½ç›´æ¥è¯„å®¡AIçš„è®°å¿†ã€‚

### å¥½å¤„3ï¼šè¿ç§»è‡ªç”±ï¼Œä¸è¢«é”å®š

**ä¼ ç»Ÿæ–¹æ¡ˆ**ï¼šå¦‚æœç”¨äº†Mem0æƒ³æ¢Zepæˆ–å…¶ä»–æ¡†æ¶ï¼Œå°±è¦å¯¼å‡ºæ•°æ®ã€è½¬æ¢æ ¼å¼ã€é‡æ–°å¯¼å…¥ã€‚

**memsearchæ–¹æ¡ˆ**ï¼šè®°å¿†æ˜¯çº¯æ˜æ–‡Markdownï¼Œè¿ç§»é›¶æˆæœ¬ï¼š
- **æ¢ç”µè„‘**ï¼šç”¨rsyncå¤åˆ¶memoryæ–‡ä»¶å¤¹ï¼Œç›´æ¥èƒ½ç”¨
- **æ¢embeddingæ¨¡å‹**ï¼šé‡æ–°æ‰§è¡Œç´¢å¼•å‘½ä»¤ï¼Œ5åˆ†é’Ÿæå®š
- **æ¢å‘é‡æ•°æ®åº“**ï¼šåªæ”¹ä¸€è¡Œé…ç½®

### å¥½å¤„4ï¼šäººæœºå…±åˆ›ï¼Œå„å¸å…¶èŒ

| è§’è‰² | èŒè´£ |
|------|------|
| **AIè´Ÿè´£** | è‡ªåŠ¨ç”Ÿæˆæ¯æ—¥æ—¥å¿—ï¼ˆYYYY-MM-DD.mdï¼‰ï¼Œè®°å½•çç¢çš„æ‰§è¡Œç»†èŠ‚ |
| **äººç±»è´Ÿè´£** | æ‰‹åŠ¨ç»´æŠ¤MEMORY.mdï¼Œæç‚¼é•¿æœŸæœ‰æ•ˆçš„åŸåˆ™ |

---

## 03 æ¶æ„æ‹†è§£ï¼šå››å¤§æµç¨‹

memsearchçš„æ ¸å¿ƒå·¥ä½œæµç¨‹æœ‰4ä¸ªï¼š

### æµç¨‹1ï¼šWatchï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–ï¼‰

ç›‘å¬memoryæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰Markdownæ–‡ä»¶ï¼Œä¿®æ”¹ã€ä¿å­˜æ–‡ä»¶åï¼Œç³»ç»Ÿä¼šåœ¨**1500msåè‡ªåŠ¨è§¦å‘é‡æ–°ç´¢å¼•**ã€‚

> 1500msæ˜¯ä¸ªå®æ“åçš„ç»éªŒå€¼ï¼š
> - å¤ªçŸ­ï¼ˆæ¯”å¦‚100msï¼‰ï¼šä¼šå¯¼è‡´æ‰“å­—æ—¶é¢‘ç¹è§¦å‘ç´¢å¼•
> - å¤ªé•¿ï¼ˆæ¯”å¦‚10ç§’ï¼‰ï¼šä¼šå½±å“ä½“éªŒ
> - 1500msåˆšå¥½å¹³è¡¡å“åº”é€Ÿåº¦å’Œèµ„æºæ¶ˆè€—

### æµç¨‹2ï¼šIndexï¼ˆåˆ†å—ã€å»é‡ã€ç´¢å¼•ï¼‰

Indexæ˜¯memsearchçš„æ€§èƒ½å…³é”®ï¼Œä¸»è¦åš3ä»¶äº‹ï¼š

**ç¬¬ä¸€ä»¶äº‹ï¼šåˆ†å—ï¼ˆChunkingï¼‰**
- æŒ‰æ ‡é¢˜ï¼ˆheadingï¼‰å’Œæ®µè½åˆ‡åˆ†
- ä¸€ä¸ª##æ ‡é¢˜+å®ƒçš„å†…å®¹ä¸ºä¸€ä¸ªchunk
- è¯­ä¹‰è¾¹ç•Œæ›´æ¸…æ™°

**ç¬¬äºŒä»¶äº‹ï¼šå»é‡ï¼ˆDedupï¼‰**
- è®¡ç®—æ¯ä¸ªchunkçš„SHA-256å“ˆå¸Œ
- é‡å¤å†…å®¹åªç´¢å¼•ä¸€æ¬¡
- èƒ½çœ20%ä»¥ä¸Šçš„embedding APIè°ƒç”¨æˆæœ¬

**ç¬¬ä¸‰ä»¶äº‹ï¼šChunk IDè®¾è®¡**
æ ¼å¼ï¼š`hash(source_path:start_line:end_line:content_hash:model_version)`

åŒ…å«ï¼š
- source_pathï¼šå“ªä¸ªæ–‡ä»¶
- start_line, end_lineï¼šæ–‡ä»¶çš„å“ªå‡ è¡Œ
- content_hashï¼šå†…å®¹çš„å“ˆå¸Œå€¼
- model_versionï¼šç”¨çš„å“ªä¸ªembeddingæ¨¡å‹

### æµç¨‹3ï¼šSearchï¼ˆæ··åˆæœç´¢ï¼‰

é‡‡ç”¨**å‘é‡æœç´¢ï¼ˆ70%æƒé‡ï¼‰+ BM25å…³é”®è¯æœç´¢ï¼ˆ30%æƒé‡ï¼‰**çš„æ··åˆæ¨¡å¼ï¼š

| æœç´¢ç±»å‹ | æƒé‡ | é€‚ç”¨åœºæ™¯ |
|----------|------|----------|
| å‘é‡æœç´¢ | 70% | è¯­ä¹‰åŒ¹é…ï¼ˆç”¨è¯ä¸åŒä½†è¯­ä¹‰ä¸€è‡´ï¼‰ |
| BM25æœç´¢ | 30% | ç²¾ç¡®åŒ¹é…ï¼ˆæŸ¥é”™è¯¯ç ã€å‡½æ•°åï¼‰ |

> ğŸ’¡ å¦‚æœæŸ¥è¯¢åå‘ç²¾ç¡®åŒ¹é…ï¼ˆæŸ¥é”™è¯¯ç ã€å‡½æ•°åï¼‰ï¼Œå¯ä»¥æé«˜BM25æƒé‡åˆ°50%ã€‚

**æ¸è¿›å¼æŠ«éœ²**ï¼šæœç´¢è¿”å›Top-Kï¼ˆé»˜è®¤3ï¼‰ä¸ªchunkæ‘˜è¦ï¼ˆæˆªæ–­200å­—ï¼‰ï¼Œéœ€è¦æ—¶è°ƒç”¨ `memsearch expand` æŸ¥çœ‹å®Œæ•´å†…å®¹ã€‚

### æµç¨‹4ï¼šCompactï¼ˆå‹ç¼©æ—§è®°å¿†ï¼‰

Agentè¿è¡Œä¹…äº†ï¼Œæ—§çš„è®°å¿†ä¼šå æ»¡ä¸Šä¸‹æ–‡ï¼Œå¢åŠ æˆæœ¬ä¹Ÿå¹²æ‰°å¤§æ¨¡å‹å›ç­”çš„å‡†ç¡®ç‡ã€‚

Compactä¼šï¼š
1. è°ƒç”¨LLMæ€»ç»“æ‰€æœ‰å†å²è®°å¿†
2. ç”Ÿæˆç²¾ç®€æ‘˜è¦
3. åˆ é™¤/å½’æ¡£åŸå§‹æ–‡ä»¶

å¯æ‰‹åŠ¨è§¦å‘ï¼Œä¹Ÿå¯é…ç½®å®šæ—¶è‡ªåŠ¨æ‰§è¡Œã€‚

---

## 04 å®æ“æŒ‡å—

### å®‰è£…

```bash
pip install memsearch
```

### ä½¿ç”¨æ–¹å¼

#### æ–¹å¼1ï¼šPython APIï¼ˆé›†æˆåˆ°Agentæ¡†æ¶ï¼‰

```python
from openai import OpenAI
from memsearch import MemSearch

llm = OpenAI()
ms = MemSearch(paths=["./memory/"])

async def agent_chat(user_input: str) -> str:
    # 1. Recall â€” æœç´¢ç›¸å…³è®°å¿†
    memories = await ms.search(user_input, top_k=3)
    context = "\n".join(f"- {m['content'][:200]}" for m in memories)
    
    # 2. Think â€” è°ƒç”¨ LLM
    resp = llm.chat.completions.create(
        model="gpt-4o-mini",
        messages=[
            {"role": "system", "content": f"Memories:\n{context}"},
            {"role": "user", "content": user_input},
        ],
    )
    
    # 3. Remember â€” å†™å…¥markdownï¼Œæ›´æ–°ç´¢å¼•
    save_memory(f"## {user_input}\n{resp.choices[0].message.content}")
    await ms.index()
    
    return resp.choices[0].message.content
```

æ ¸å¿ƒé€»è¾‘ï¼š**Recallï¼ˆæœç´¢è®°å¿†ï¼‰â†’ Thinkï¼ˆLLMæ¨ç†ï¼‰â†’ Rememberï¼ˆå†™å…¥è®°å¿†ï¼‰**ï¼Œé—­ç¯å®Œæ•´ã€‚

#### æ–¹å¼2ï¼šCLIå·¥å…·ï¼ˆå¿«é€Ÿæ“ä½œï¼‰

```bash
memsearch index ./docs/              # ç´¢å¼•æ–‡ä»¶
memsearch search "Redis caching"      # æœç´¢
memsearch watch ./docs/               # ç›‘å¬æ–‡ä»¶å˜åŒ–
memsearch compact                    # å‹ç¼©æ—§è®°å¿†
```

### æ•°æ®åº“é€‰å‹å»ºè®®

| æ–¹æ¡ˆ | é€‚ç”¨åœºæ™¯ |
|------|----------|
| Milvus Liteï¼ˆé»˜è®¤ï¼‰ | æœ¬åœ°.dbæ–‡ä»¶ï¼Œé›¶é…ç½®ï¼Œé€‚åˆä¸ªäººä½¿ç”¨ |
| Milvus Server | è‡ªæ‰˜ç®¡æœåŠ¡ï¼Œæ”¯æŒå¤šAgentå…±äº«æ•°æ®ï¼Œé€‚åˆå›¢é˜Ÿç¯å¢ƒ |
| Zilliz Cloud | å…¨æ‰˜ç®¡ï¼Œè‡ªåŠ¨æ‰©å®¹ã€å¤‡ä»½ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ |

---

## 05 å’Œå…¶ä»–æ–¹æ¡ˆå¯¹æ¯”

| ç‰¹æ€§ | memsearch | Mem0 | Zep |
|------|-----------|------|-----|
| å­˜å‚¨æ ¼å¼ | Markdownï¼ˆé€æ˜å¯è¯»ï¼‰ | å‘é‡æ•°æ®åº“ | å‘é‡æ•°æ®åº“ |
| å¯ç¼–è¾‘æ€§ | âœ… ç›´æ¥ç¼–è¾‘MDæ–‡ä»¶ | âŒ APIæ“ä½œ | âŒ APIæ“ä½œ |
| ç‰ˆæœ¬æ§åˆ¶ | âœ… GitåŸç”Ÿæ”¯æŒ | âŒ | âŒ |
| è¿ç§»æˆæœ¬ | âœ… é›¶æˆæœ¬ï¼ˆçº¯æ–‡æœ¬ï¼‰ | âŒ éœ€å¯¼å‡ºè½¬æ¢ | âŒ éœ€å¯¼å‡ºè½¬æ¢ |
| é€æ˜åº¦ | âœ… æ‰“å¼€æ–‡ä»¶å³çœ‹ | âŒ éœ€æŸ¥æ•°æ®åº“ | âŒ éœ€æŸ¥æ•°æ®åº“ |

---

## é¡¹ç›®ä¿¡æ¯

- **é¡¹ç›®åœ°å€**ï¼šhttps://github.com/zilliztech/memsearch
- **æ–‡æ¡£é¡µé¢**ï¼šhttps://zilliztech.github.io/memsearch/
- **License**: MITï¼ˆå¯ç›´æ¥å•†ç”¨ï¼‰

---

## ç›¸å…³é˜…è¯»

- [chunkå¤§å°æ²¡æœ‰æœ€ä¼˜è§£ï¼å¤šå°ºå¯¸é€çº§chunkå¦‚ä½•æå‡RAG 40%å‡†ç¡®ç‡](https://mp.weixin.qq.com/s?__biz=MzUzMDI5OTA5NQ==&mid=2247511738)
- [æ‹†è§£ï¼šOpenClawå°±æ˜¯agentè®°å¿†çš„æœ€ä½³èŒƒå¼ï¼å…¶é€»è¾‘ä¸RAGæœ‰ä½•åŒºåˆ«ï¼Ÿ](https://mp.weixin.qq.com/s?__biz=MzUzMDI5OTA5NQ==&mid=2247511729)
- [è‡ªåŠ¨é©¾é©¶+ç™¾äº¿å‘é‡ï¼Œå…¨çƒGPUé¾™å¤´å¦‚ä½•ç”¨MilvusåŠ é€Ÿæ¨¡å‹è®­ç»ƒ](https://mp.weixin.qq.com/s?__biz=MzUzMDI5OTA5NQ==&mid=2247511724)

---

*æœ¬æ–‡ç”± Claude æ•´ç†ï¼Œä¿å­˜äº Obsidian*
